(()=>{"use strict";const{ownKeys:e}=Reflect,t=["toString","toLocaleString","valueOf"],r=(r,o)=>{const n=o[r];if(!n)return;let i=!1;try{const e=Object.getOwnPropertyDescriptor(o,r);e&&(i=e.enumerable||!1)}catch(e){console.warn(`Failed to get property descriptor for key "${r}":`,e)}globalThis.defineStrictProperty(r,n,o,i);const c=n?.prototype;if(c){const e=Object.getOwnPropertyDescriptors(c);Object.keys(e).forEach(r=>{const o=e[r];o&&((e,r,o)=>{if("constructor"!==r&&"value"in o&&o.configurable&&!t.includes(String(r))){const{value:t,enumerable:n,get:i,set:c}=o,a={enumerable:n,configurable:!1,...t?{value:t,writable:!1}:{get:i,set:c}};Object.defineProperty(e,r,a)}})(c,r,o)})}e(n).forEach(e=>{const t=Object.getOwnPropertyDescriptor(n,e);t&&(t.writable||t.configurable)&&globalThis.defineStrictProperty(e.toString(),n[e],n,t.enumerable)})},o=(e,t,r,o)=>{(e=>e?.set&&e?.get&&"function"==typeof e.set&&"function"==typeof e.get&&!e.get.toString().includes("[native code]")&&!e.set.toString().includes("[native code]"))(t)?Object.defineProperty(r||globalThis,e,{get:t.get,set:t.set,configurable:!1,enumerable:o||!1}):Object.defineProperty(r||globalThis,e,{value:t,writable:!1,configurable:!1,enumerable:o||!1})},n=()=>{const e=globalThis.open,t=document.open,r=(t,r,o)=>{const n="string"!=typeof t,i=e.call(window,t,r,o);return n||((c=t).startsWith("//")&&/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/g.test(`${location.protocol}:${c}`)&&(c=`${location.protocol}${c}`),!c.startsWith("http")||new URL(c).hostname===location.hostname)?{}:i;var c};defineStrictProperty("open",r,globalThis,!0),defineStrictProperty("open",(e,o,n)=>e?r(e,o,n):t.call(document,e,o,n),document,!0)};function i(e){let{context:t,property:r,value:o,enumerable:n=!0}=e,i=e.get,a=e.set;if(!r||void 0===o&&!i&&!a)return new Error("property and value are required");let s=t||globalThis,l=s?.[r],u={};if(void 0!==o)u.value=o;else{if(i){let e=c(i);e&&(u.get=e)}if(a){let e=c(a);e&&(u.set=e)}}let p={...u,enumerable:n||!1,configurable:!1};void 0!==o&&(p.writable=!1);try{Object.defineProperty(s,r,p)}catch(e){return e instanceof TypeError?l:e}return l}function c(e,t){return"function"==typeof e?e:!0===e?.async&&"function"==typeof e.func?t?async function(t){return e.func(t)}:async function(){return e.func()}:"function"==typeof e?.func?e.func:void 0}try{i({property:"strictDefine",value:i})}catch{}try{i({property:"defineStrictObject",value:s})}catch{}try{i({property:"defineStrictMethod",value:l})}catch{}var a=["toString","toLocaleString","valueOf","constructor","prototype"];function s(e){let{context:t,property:r,propertiesToExclude:o=[],skipPrototype:n=!1,hardenPrototypePropertiesToExclude:c=[]}=e;if(!r)return new Error("property is required");let l=(t||globalThis)[r],p={},d=u(t,r);l&&("object"==typeof l||"function"==typeof l)&&Reflect.ownKeys(l).forEach(e=>{if(!o.includes(e)&&!a.includes(e)){let t=u(l,e);if(t&&(t.writable||t.configurable)){let{value:r,get:o,set:n,enumerable:c=!1}=t,a={};void 0!==r?a.value=r:o?a.get=o:n&&(a.set=n);try{let t=i({context:l,property:e,...a,enumerable:c});p[e]=t}catch(r){if(!(r instanceof TypeError))throw r;try{p[e]=t.value||t.get||t.set}catch{}}}}});let f={originalObject:l,originalProperties:p};if(!n&&void 0!==l?.prototype){let e=s({context:l,property:"prototype",propertiesToExclude:c,skipPrototype:!0});e instanceof Error||(f.originalPrototype=e?.originalObject,f.originalPrototypeProperties=e?.originalProperties)}return i({context:t,property:r,value:l,enumerable:d?.enumerable}),f}function l(e,t){let r=(t||globalThis)[e],o=u(t||globalThis,e);return r&&o&&(o.writable||o.configurable)?(Object.freeze(r),i({context:globalThis,property:e,value:r})):r}function u(e,t){if(e&&t)try{return Reflect.getOwnPropertyDescriptor(e,t)}catch{return}}function p(e){if("string"!=typeof e)return e;try{return decodeURIComponent(e).toLowerCase().trim()}catch{return e.toLowerCase().trim()}}var d=["TextEncoder","TextDecoder","XMLHttpRequestEventTarget","EventTarget","URL","JSON","Reflect","Object","Array","Map","Set","WeakMap","WeakSet","Promise","Symbol","Error"],f=["addEventListener","removeEventListener","dispatchEvent","encodeURI","encodeURIComponent","decodeURI","decodeURIComponent"];const y=function(){let e=document.createElement,t=Element.prototype.setAttribute,r=Element.prototype.setAttributeNS;return i({property:"createElement",context:document,value:function(o,n){let c=e.call(document,o,n);if("iframe"===p(o)){i({property:"srcdoc",context:c,get:()=>"",set:()=>{console.warn("`srcdoc` is not allowed in iframe elements.")}});let e=function(e,r){"srcdoc"!==e.toLowerCase()?t.call(c,e,r):console.warn("`srcdoc` attribute is not allowed to be set.")},o=function(e,t,o){"srcdoc"!==t.toLowerCase()?r.call(c,e,t,o):console.warn("`srcdoc` attribute is not allowed to be set.")};c.setAttribute=e,c.setAttributeNS=o}return c},enumerable:!0}),{createElement:e,setAttribute:t,setAttributeNS:r}},g="client-binding",b="security_overrideGlobals",m=["/_api/v1/access-tokens","/_api/v2/dynamicmodel","/_api/one-app-session-web/v3/businesses"],h=e=>(e instanceof Headers?e.forEach((t,r)=>{decodeURIComponent(r).toLowerCase()===g&&e.delete(r)}):Object.keys(e).forEach(t=>{decodeURIComponent(t).toLowerCase()===g&&delete e[t]}),e),w=e=>{let t=!0;const r=(e=>{let t,r;if(globalThis.Request&&e instanceof Request)t=e.url;else{if("function"!=typeof e?.toString)throw new Error("Unsupported type for url");t=e.toString()}try{return new URL(t).pathname}catch(e){return r=t.replace(/#.+/gi,"").split("?").shift(),r.startsWith("/")?r:`/${r}`}})(e),o="string"==typeof(n=r)?decodeURIComponent(n).toLowerCase().trimStart():n;var n;return m.some(e=>o.includes(e))&&(t=!1),t},v=(e=globalThis)=>{const t=fetch;e.defineStrictProperty("fetch",function(){const r=(o=arguments,globalThis.Request&&o[0]instanceof Request&&o[0]?.headers?h(o[0].headers):o[1]?.headers&&h(o[1].headers),o);var o;return w(arguments[0])?t.apply(e,Array.from(r)):new Promise((e,t)=>{const r=new Error("TB002");window.fedops?.interactionStarted(r,b),t(r)})})};performance.mark("overrideGlobals started");const{isExcludedFromSecurityExperiments:E,experiments:S}=window.viewerModel,T=!E&&S["specs.thunderbolt.securityExperiments"];try{((e=globalThis)=>{Object.defineProperty(e,"defineStrictProperty",{value:o,writable:!1,enumerable:!1,configurable:!1})})(),n(),T&&y(),S["specs.thunderbolt.hardenFetchAndXHR"]&&T&&(v(),((e=globalThis)=>{const t=XMLHttpRequest;function r(){const e=new t,r=e.open,o=e.setRequestHeader;return e.open=function(){if(arguments.length<2||w(arguments[1]))return r.apply(e,Array.from(arguments));{const e=new Error("TB002");throw window.fedops?.interactionStarted(e,b),e}},e.setRequestHeader=function(t,r){decodeURIComponent(t).toLowerCase()!==g&&o.call(e,t,r)},e}Object.keys(t).forEach(e=>{r[e]=t[e]}),e.defineStrictProperty("XMLHttpRequest",r)})()),(()=>{if(navigator&&"serviceWorker"in navigator)navigator.serviceWorker.register=()=>console.log("Service worker registration is not allowed"),Promise.resolve()})(),(e=>{let t=[],o=[];o=o.concat(["TextEncoder","TextDecoder"]),e&&(o=o.concat(["XMLHttpRequestEventTarget","EventTarget"])),o=o.concat(["URL","JSON"]),e&&(t=t.concat(["addEventListener","removeEventListener"])),t=t.concat(["encodeURI","encodeURIComponent","decodeURI","decodeURIComponent"]),o=o.concat(["String","Number"]),e&&o.push("Object"),o=o.concat(["Reflect"]),t.forEach(e=>{Object.freeze(globalThis[e]),["addEventListener","removeEventListener"].includes(e)&&globalThis.defineStrictProperty(e,document[e],document,!0),globalThis.defineStrictProperty(e,globalThis[e],globalThis,!0)}),o.forEach(e=>{r(e,globalThis)})})(T),T&&(defineStrictProperty("preventStringArgument",(e,t,r)=>{const o=r||globalThis,n=o[e];defineStrictProperty(e,function(){const r=Array.from(arguments);if("string"!=typeof r[t])return n.apply(o,r);console.warn(`Calling ${e} with a String Argument at index ${t} is not allowed`)},o)}),preventStringArgument("setTimeout",0),preventStringArgument("setInterval",0))}catch(e){window?.viewerModel?.mode.debug&&console.error(e);const t=new Error("TB006");window.fedops?.reportError(t,"security_overrideGlobals"),window.Sentry?window.Sentry.captureException(t):globalThis.defineStrictProperty("sentryBuffer",[t],window,!1)}performance.mark("overrideGlobals ended")})();
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/overrideGlobals.inline.44dd5dad.bundle.min.js.map